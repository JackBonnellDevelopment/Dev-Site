<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content="Jack Bonnell">
<link rel="shortcut icon" type=image/x-icon href=https://jackbonnelldevelopment.github.io/img/favicon.ico>
<title>Life: Device Tree Overlays, JTag Development Flows and Validation Testing | Jack Bonnell - C++ Programmer</title>
<meta name=description content="Working through Device Tree Overlay Issues and Jtag Development flow optimisation">
<link href=https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl crossorigin=anonymous>
<link rel="preload stylesheet" href=/css/main.min.css as=style>
<link rel=stylesheet type=text/css href=https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css>
<link rel=stylesheet type=text/css href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,400,200bold,400old"><!--[if lt IE 9]><script src=https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js></script>
<script src=https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js></script><![endif]-->
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-1Q6WEWQ7RM','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</head>
<body>
<div id=content>
<div class="container mb-3">
<nav class="navbar navbar-expand-lg">
<div class=container-fluid>
<a class=navbar-brand href=https://jackbonnelldevelopment.github.io/>
<i class="fa fa-home"></i>
</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbar aria-controls=navbar>
<i class="fa fa-bars"></i>
</button>
<div id=navbar class="collapse navbar-collapse">
<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
<li class=nav-item>
<li><a class=nav-link href=/blog/>BLOG</a></li>
</li>
<li class=nav-item>
<li><a class=nav-link href=/projects/>PROJECTS</a></li>
</li>
<li class=nav-item>
<li><a class=nav-link href=https://resume.io/r/cdv5HCyfm>RESUME</a></li>
</li>
</ul>
</div>
</div>
</div>
</nav>
<div class=container>
<h3 class=mt-3><b><a href=https://jackbonnelldevelopment.github.io/blog/life-device-tree-overlays-jtag-development-flows-and-validation-testing/>Life: Device Tree Overlays, JTag Development Flows and Validation Testing</a></b></h3>
<div class="blog-title my-4">
<h6>
October 7, 2021
&nbsp;&nbsp;
<span class="badge bg-success">Xilinx</span>
<span class="badge bg-success">Kria</span>
<span class="badge bg-success">FPGA</span>
<span class="badge bg-success">JTag</span>
<span class="badge bg-success">Vivado</span>
</h6>
</div>
<div class=panel>
<div class=panel-body>
<div class=blogpost>
<h1 id=life-device-tree-overlays-jtag-development-flows-and-validation-testing>Life: Device Tree Overlays, JTag Development Flows and Validation Testing</h1>
<p>This week, I&rsquo;ve been working on creating a more efficient Workflow for myself regarding mocking up block designs and Vitis applications utilising the <a href=https://store.sundance.com/product/lynsyn-lite/>Lynsyn Lite</a>, along with trying to brush up on my validation testing in Vivado.</p>
<p><img src=/img/lynsyn_lite.png alt="Lynsyn Lite"></p>
<h2 id=device-tree-overlays>Device Tree Overlays</h2>
<p>With my current workflow structure, I do not come across Device tree overlays very often as usually, the PetaLinux build is bespoke to the task at hand. With the KV260 I&rsquo;ve been looking to utilise the Vitis IDE for creating applications based on my pre-configured block designs.</p>
<p>My current problem has been with the DPU RTL Kernel Example creates an SD card image that will not boot on the KV260. Therefore I need to use the FPGA manager in the PetaLinux software to make an application that I can load through the terminal using xmutil.</p>
<p>Currently, the main issue is that the DPU is automatically implemented through the Vitis example, meaning that I have no way to set the interrupts and device tree flow manually.</p>
<p>After some digging, I found an old tutorial on the Xilinx documentation based on 2018.3 that shows how you can use a helper <a href="https://xilinx-wiki.atlassian.net/wiki/download/attachments/18841847/dt_overaly%20.tcl?version=1&modificationDate=1536676250116&cacheVersion=1&api=v2">TCL script</a> to create the Device Tree Overlay.</p>
<p>Now that I have found this shortcut I am now able to progress with my DPU tutorial. Keep an eye out for it on my <a href=/projects>Projects</a> page.</p>
<h2 id=jtag-development-flows>JTag Development Flows</h2>
<p>I&rsquo;ve always been a lazy person, so finding the shortest way around a project is usually my first thought when working on a development flow. I have started to look at the virtual Cable utilisation within the Xilinx toolchain to load data onto my ZCU104.</p>
<p>Currently, due to the crazy resources needed to run the Xilinx toolchain, I use AWS to host my toolchain so that I am able to set the resources to the tasks I am undertaking. This has worked great for processing applications and synthesising block designs, but it falls short in getting the data to the device itself.</p>
<p>AWS falls short because I need to package the data, then compress and upload it to my online file platform and then do the reverse before I am able to load it onto my ZCU104.</p>
<p><img src=/img/zcu104.png alt=ZCU104></p>
<p>Realising that this was adding at least an hour to my development time, I decided to utilise a <a href=https://store.sundance.com/product/lynsyn-lite/>Lynsyn Lite</a> and a VPN to port forward the IP address of my local virtual cable to the AWS machine. This allowed me to load up my image file directly from PetaLinux without the need for an SD card.</p>
<p>Even though this is slower than loading from a local SD card, this has lowered my development time by around 20 minutes and means I do not need to keep track of which sd card is which.</p>
<p>Great Success!</p>
<h2 id=validation-testing>Validation Testing</h2>
<p>With the KV260 I want to utilise the simulation testing available within Vivado to validate my block designs. Currently, my main issue has been that there is minimal utilisation of simulation for visual projects.</p>
<p><img src=/img/vivado.png alt="Vivado ML"></p>
<p>The DPU utilises Interrupts to let the workflow path know that processing has been complete and the information is ready to be received. Currently, the idea I&rsquo;m working with this to utilise JTag to AXI IP. This will allow me to send and read data from the block design loaded onto real-time hardware. In theory, this means I can emulate the interrupt pattern and data output on the DPU and MIPI IP to debug any intermittent issues from my design.</p>
<p>Currently, I am working on the real-time TCL script that will send and read the data to create a validation test for the block design. This should, in theory, give me a much better granularity in my Block Design workflow.</p>
<div class="related-posts mt-4 py-3">
<h5>Related Posts</h5>
<div class=row>
<div class=col-4>
<h6 style=text-align:right>
September 24, 2021
</h6>
</div>
<div class=col-8>
<h6 style=text-align:left>
<b><a href=/blog/life-fpga-work-huel-future-thoughts/>Life: FPGA Work, Huel, Future Thoughts</a></b>
</h6>
</div>
</div>
<div class=row>
<div class=col-4>
<h6 style=text-align:right>
September 17, 2021
</h6>
</div>
<div class=col-8>
<h6 style=text-align:left>
<b><a href=/blog/kria-intial-thoughts/>Kria: Initial Thoughts</a></b>
</h6>
</div>
</div>
<div class=row>
<div class=col-4>
<h6 style=text-align:right>
October 1, 2021
</h6>
</div>
<div class=col-8>
<h6 style=text-align:left>
<b><a href=/blog/life-vitis-ai-libraries-ros2-new-addition/>Life: Vitis AI Libraries, ROS2, New Addition</a></b>
</h6>
</div>
</div>
</div>
</div>
</div>
<div class=disqus>
<div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//jackbonnelldevelopment.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
</div>
</div>
</div>
<footer class=footer>
<div class=container>
<div class=text-muted>&copy; All rights reserved. Powered by <a href=https://gohugo.io/>Hugo</a>
</div>
</footer>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js integrity=sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG crossorigin=anonymous></script>
</body>
</html>