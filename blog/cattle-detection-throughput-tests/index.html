<!doctype html><html lang=en-US><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Jack Bonnell"><link rel="shortcut icon" type=image/x-icon href=https://jackbonnell.dev/img/favicon.ico><title>Cattle Detection: Throughput Tests | Jack Bonnell | C++ Programmer | FPGA Enthusiast</title><meta name=description content="Initial Benchmarking on KV260 Ready Project Cattle Detect"><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl crossorigin=anonymous><link rel="preload stylesheet" href=/css/main.min.css as=style><link rel=stylesheet type=text/css href=https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css><link rel=stylesheet type=text/css href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,400,200bold,400old"><!--[if lt IE 9]><script src=https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js></script>
<script src=https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js></script><![endif]--><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-1Q6WEWQ7RM","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><div id=content><div class="container mb-3"><nav class="navbar navbar-expand-lg"><div class=container-fluid><a class=navbar-brand href=https://jackbonnell.dev/><i class="fa fa-home"></i></a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbar aria-controls=navbar>
<i class="fa fa-bars"></i></button><div id=navbar class="collapse navbar-collapse"><ul class="navbar-nav ms-auto mb-2 mb-lg-0"><li class=nav-item><li><a class=nav-link href=/blog/>BLOG</a></li></li><li class=nav-item><li><a class=nav-link href=/projects/>PROJECTS</a></li></li><li class=nav-item><li><a class=nav-link href=/pdf/resume.pdf>RESUME</a></li></li></ul></div></div></div></nav><div class=container><h3 class=mt-3><b><a href=https://jackbonnell.dev/blog/cattle-detection-throughput-tests/>Cattle Detection: Throughput Tests</a></b></h3><div class="blog-title my-4"><h6>April 12, 2022
&nbsp;&nbsp;
<span class="badge bg-success">Xilinx</span>
<span class="badge bg-success">Kria</span>
<span class="badge bg-success">FPGA</span></h6></div><div class=panel><div class=panel-body><div class=blogpost><h1 id=cattle-detection-throughput-tests>Cattle Detection: Throughput Tests</h1><p>After the Adaptive computing Challenge, I&rsquo;ve been looking for a new project to keep me busy. Looking back at the Cattle Detection entry for ACC I feel there is a viable open-source opportunity to make a difference in the way Cattle is managed. So I&rsquo;ve decided to build on my project entry and transform it from a concept to an open-source building block.</p><h2 id=validating-throughput>Validating Throughput</h2><p>After the Adaptive computing Challenge, I&rsquo;ve been looking for a new project to keep me busy. Looking back at the Cattle Detection entry for ACC I feel there is a viable open-source opportunity to make a difference in the way Cattle is managed. So I&rsquo;ve decided to build on my project entry and transform it from a concept to an open-source building block.</p><p>My first step for this project is to work out theoretical frame rates for the KV260. Allowing me to scale my project according to the capabilities of the FPGA. There is little point in adding functionality when the latency is the bottleneck!</p><h2 id=block-design>Block Design</h2><p>For my test used a test pattern generator to generate the footage for the VDMA as shown in the image and then used the PYNQ framework to mock up a quick script to configure and run the tests.</p><p><img src=/img/block_design_VDMA.png alt="Block Design"></p><h2 id=the-results>The Results</h2><p>For the test, I ran the VDMA read in Async mode for 10000 cycles giving the VDMA time to settle and give a more accurate reading. The result was really promising, registering a throughput of 637FPS on 640x480p.</p><p><img src=/img/480p_VDMA.png alt="480p test"></p><p>Even when I tested at 1080P I was still able to get an average of 84 FPS!</p><p><img src=/img/1080p_VDMA.png alt="1080p test"></p><p>But for a more realistic throughput test I used 320x320, this is 320 s the average pixel number for TF_COCO. Which for now, will be the main AI dataset used for detection.</p><p><img src=/img/320p_VDMA.png alt="1080p test"></p><p>These are theoretical values but this test gives you an idea of the power of this FPGA. FPGA will always be limited by the frame rate for the camera and post processing that will occur.</p><div class="related-posts mt-4 py-3"><h5>Related Posts</h5><div class=row><div class=col-4><h6 style=text-align:right>April 1, 2022</h6></div><div class=col-8><h6 style=text-align:left><b><a href=/blog/adaptive-computing-challenge-cattle-detection/>Adaptive Computing Challenge: Cattle Detection</a></b></h6></div></div><div class=row><div class=col-4><h6 style=text-align:right>November 19, 2021</h6></div><div class=col-8><h6 style=text-align:left><b><a href=/blog/adaptive-computing-challenge-week-1/>Adaptive Computing Challenge: Week 1</a></b></h6></div></div><div class=row><div class=col-4><h6 style=text-align:right>November 12, 2021</h6></div><div class=col-8><h6 style=text-align:left><b><a href=/blog/getting-ready-for-the-adaptive-computing-challenge/>Getting Ready for the Adaptive Computing Challenge</a></b></h6></div></div></div></div></div><div class=disqus><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//jackbonnelldevelopment.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div></div><footer class=footer><div class=container><div class=text-muted>&copy; All rights reserved. Powered by <a href=https://gohugo.io/>Hugo</a></div></footer><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js integrity=sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG crossorigin=anonymous></script></body></html>